<!doctype html> 
<html lang="ja"> 
 <head> 
  <meta charset="utf-8" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1 " /> 
  <title>AR.js Marker Example</title> 
  <!-- A-Frame 本体 --> 
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script> 
   <!-- AR.js for A-Frame (CDN) --> 
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.min.js"></script> 
<style> 
body, html { margin:0; padding:0; overflow:hidden; } 
.hint { position: fixed; left: 50%; transform: translateX(-50%);
 bottom: 12px; background: rgba(0,0,0,.6); color: #fff; padding: 6px 1
 0px; border-radius: 8px; font-size: 14px; } 
</style> 
</head> 
<body> 
<!-- arjs="sourceType: webcam;" で端末カメラを使用 --> 
<a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false; "> 
<!-- 既成のHIROマーカーを使う例 <a-marker preset="hiro">  -->
 <a-marker type="pattern" url="markers/ghost3.patt"> 
<a-entity gltf-model="url(assets/model.glb)" position="0 0 0" scale= "0.5 0.5 0.5"></a-entity> 
<!-- 原点に簡単な立方体を表示 --> 
 <!-- === ケーキ本体 === -->
      <a-cylinder position="0 0 -4" radius="2" height="0.8" color="#FFC0CB"></a-cylinder>
      <a-cylinder position="0 0.4 -4" radius="2.05" height="0.1" color="#FFE4F1"></a-cylinder>
      <a-cylinder position="0 0.9 -4" radius="1.3" height="0.6" color="#FFB6C1"></a-cylinder>
      <a-cylinder position="0 1.2 -4" radius="1.35" height="0.1" color="#FFE4F1"></a-cylinder>

      <!-- === ろうそくと炎 === -->
      <a-cylinder position="0 1.6 -4" radius="0.05" height="0.6" color="#ADD8E6"></a-cylinder>
      <a-cylinder position="0.4 1.6 -4" radius="0.05" height="0.6" color="#ADD8E6"></a-cylinder>
      <a-cylinder position="-0.4 1.6 -4" radius="0.05" height="0.6" color="#ADD8E6"></a-cylinder>

      <a-cone position="0 1.95 -4" radius-bottom="0.07" height="0.15" color="#FFD700"
               animation="property: position; dir: alternate; dur: 600; loop: true; to: 0 1.98 -4"></a-cone>
      <a-cone position="0.4 1.95 -4" radius-bottom="0.07" height="0.15" color="#FFD700"
               animation="property: position; dir: alternate; dur: 600; loop: true; to: 0.4 1.98 -4"></a-cone>
      <a-cone position="-0.4 1.95 -4" radius-bottom="0.07" height="0.15" color="#FFD700"
               animation="property: position; dir: alternate; dur: 600; loop: true; to: -0.4 1.98 -4"></a-cone>

      <!-- === 床 === -->
      <a-plane position="0 -0.4 -4" rotation="-90 0 0" width="10" height="10" color="#FFF0F5"></a-plane>

      <!-- === いちご配置スクリプト === -->
      <script>
        const scene = document.querySelector('a-scene');

        // ==== 下段いちご ====
        const bottomCount = 8;
        const bottomY = 0.8;       // ケーキ上の高さ
        const bottomR = 1.8;       // ケーキ半径より少し内側
        for (let i = 0; i < bottomCount; i++) {
          const angle = (i / bottomCount) * Math.PI * 2;
          const x = bottomR * Math.cos(angle);
          const z = -4 + bottomR * Math.sin(angle);

          // いちご本体
          const strawberry = document.createElement('a-sphere');
          strawberry.setAttribute('position', `${x} ${bottomY} ${z}`);
          strawberry.setAttribute('radius', '0.15');
          strawberry.setAttribute('color', '#E62E2E');
          strawberry.setAttribute('scale', '1 1.3 1'); // 少し縦長
          scene.appendChild(strawberry);

          // いちごのヘタ
          const leaf = document.createElement('a-cone');
          leaf.setAttribute('position', `${x} ${bottomY + 0.18} ${z}`);
          leaf.setAttribute('radius-bottom', '0.12');
          leaf.setAttribute('radius-top', '0');
          leaf.setAttribute('height', '0.05');
          leaf.setAttribute('color', '#228B22');
          scene.appendChild(leaf);
        }

        // ==== 上段いちご ====
        const topCount = 6;
        const topY = 1.3;
        const topR = 1.2;
        for (let i = 0; i < topCount; i++) {
          const angle = (i / topCount) * Math.PI * 2;
          const x = topR * Math.cos(angle);
          const z = -4 + topR * Math.sin(angle);

          const strawberry = document.createElement('a-sphere');
          strawberry.setAttribute('position', `${x} ${topY} ${z}`);
          strawberry.setAttribute('radius', '0.12');
          strawberry.setAttribute('color', '#E62E2E');
          strawberry.setAttribute('scale', '1 1.3 1');
          scene.appendChild(strawberry);

          const leaf = document.createElement('a-cone');
          leaf.setAttribute('position', `${x} ${topY + 0.14} ${z}`);
          leaf.setAttribute('radius-bottom', '0.1');
          leaf.setAttribute('radius-top', '0');
          leaf.setAttribute('height', '0.04');
          leaf.setAttribute('color', '#228B22');
          scene.appendChild(leaf);
        }
      </script>
 
 
<a-text value="Hello AR.js" position="-0.8 1.8 0" color="#fff">
</a-text> 
</a-marker> 
<!-- カメラ --> 
<a-entity camera></a-entity> 
</a-scene> 
<div class="hint">マーカーをかざしてみてください</div> 
</body> 
</html> 
